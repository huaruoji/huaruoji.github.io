<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>分类: 题解 - 滑蒻稽的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="滑蒻稽的博客"><meta name="msapplication-TileImage" content="/img/positive.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="滑蒻稽的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="滑蒻稽的博客"><meta property="og:url" content="https://huaruoji.github.io/"><meta property="og:site_name" content="滑蒻稽的博客"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://huaruoji.github.io/img/og_image.png"><meta property="article:author" content="huaruoji"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://huaruoji.github.io"},"headline":"滑蒻稽的博客","image":["https://huaruoji.github.io/img/og_image.png"],"author":{"@type":"Person","name":"huaruoji"},"description":""}</script><link rel="icon" href="/img/positive.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="滑蒻稽的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives/">归档</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a><a class="navbar-item" href="/about/">关于我</a><a class="navbar-item" href="/%E6%AF%8F%E6%97%A5/">每日</a><a class="navbar-item" href="/%E5%8F%8B%E9%93%BE/">友链</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Huaruoji GitHub" href="https://www.github.com/huaruoji"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">题解</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/22/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P2014-%5BCTSC1997%5D%E9%80%89%E8%AF%BE/"><i class="fas fa-angle-double-right"></i>【题解】P2014 [CTSC1997]选课</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-22</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-22</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a><span> / </span><a class="link-muted" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">树形动态规划</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/%E6%B4%9B%E8%B0%B7/">洛谷</a></span><span class="level-item"><i class="far fa-clock"></i> 2 分钟读完 (大约311个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>在大学里每个学生，为了达到一定的学分，必须从很多课程里选择一些课程来学习，在课程里有些课程必须在某些课程之前学习，如高等数学总是在其它课程之前学习。现在有 <span class="math inline">\(N\)</span> 门功课，每门课有个学分，每门课有一门或没有直接先修课（若课程 a 是课程 b 的先修课即只有学完了课程 a，才能学习课程 b）。一个学生要从这些课程里选择 <span class="math inline">\(M\)</span> 门课程学习，问他能获得的最大学分是多少？</p>
<h1 id="sol">Sol</h1>
<p>本题输入数据为森林,可以用一个虚拟节点作为所有树的根.</p>
<p>和二叉苹果树比较像,本题也有选择节点(边)的数量限制.那么,数量就成了必须保存的信息.用背包的思想转移数量即可.</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">树形动态规划, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷 </a></div><a class="article-more button is-small is-size-7" href="/2021/03/22/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P2014-%5BCTSC1997%5D%E9%80%89%E8%AF%BE/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/20/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P2015-%E4%BA%8C%E5%8F%89%E8%8B%B9%E6%9E%9C%E6%A0%91/"><i class="fas fa-angle-double-right"></i>【题解】P2015 二叉苹果树</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-20</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-22</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a><span> / </span><a class="link-muted" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">树形动态规划</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/%E6%B4%9B%E8%B0%B7/">洛谷</a></span><span class="level-item"><i class="far fa-clock"></i> 4 分钟读完 (大约571个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>有一棵苹果树，如果树枝有分叉，一定是分2叉（就是说没有只有1个儿子的结点）</p>
<p>这棵树共有N个结点（叶子点或者树枝分叉点），编号为1-N,树根编号一定是1。</p>
<p>我们用一根树枝两端连接的结点的编号来描述一根树枝的位置。下面是一颗有4个树枝的树 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2   5</span><br><span class="line"> \ &#x2F; </span><br><span class="line">  3   4</span><br><span class="line">   \ &#x2F;</span><br><span class="line">    1</span><br></pre></td></tr></table></figure> 现在这颗树枝条太多了，需要剪枝。但是一些树枝上长有苹果。</p>
<p>给定需要保留的树枝数量，求出最多能留住多少苹果。</p>
<h1 id="sol">Sol</h1>
<p>这道题做得真的是疑惑又头疼......</p>
<p><del>根据个人理解,本题的题面实际上是有些问题的.假设输入数据前后输入了多颗树,最后才把这几颗树连接起来,那么如果不知道父子关系,答案就不唯一.</del></p>
<p><del>洛谷的数据出现了这种情况,但所有数据默认第二个节点是第一个节点的父亲,才没有混淆.所以就有了下面连样例都过不了但是能AC的代码.</del></p>
<p><del>我认为,应该更改题面和样例,确定第二个节点是第一个节点的儿子.或者更改数据,除了输入根,让每次输入的节点至少有一个是之前输入过的.</del></p>
<p>确定了根,答案就是唯一的.只不过我使用的方法并不正确.应该使用邻接表存图,特判父亲.可惜洛谷太水,下面的代码也能过.</p>
<p>回到本题解法.</p>
<p>保留一个节点可以看作是多保留了一些树枝,那么记录树枝数量就可完整保留信息.设将边权转到了儿子上.DP方程为<span class="math inline">\(f[u][j]=f[ls[u]][k]+f[rs[u]][j-k-1]+w[u]\)</span>,</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">树形动态规划, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷 </a></div><a class="article-more button is-small is-size-7" href="/2021/03/20/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P2015-%E4%BA%8C%E5%8F%89%E8%8B%B9%E6%9E%9C%E6%A0%91/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/20/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1352-%E6%B2%A1%E6%9C%89%E4%B8%8A%E5%8F%B8%E7%9A%84%E8%88%9E%E4%BC%9A/"><i class="fas fa-angle-double-right"></i>【题解】P1352 没有上司的舞会</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-20</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-20</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a><span> / </span><a class="link-muted" href="/categories/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">树形动态规划</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/%E6%B4%9B%E8%B0%B7/">洛谷</a></span><span class="level-item"><i class="far fa-clock"></i> 4 分钟读完 (大约605个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1352">P1352 没有上司的舞会 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)</a></p>
<p>某大学有 <span class="math inline">\(n\)</span> 个职员，编号为 <span class="math inline">\(1\ldots n\)</span>。</p>
<p>他们之间有从属关系，也就是说他们的关系就像一棵以校长为根的树，父结点就是子结点的直接上司。</p>
<p>现在有个周年庆宴会，宴会每邀请来一个职员都会增加一定的快乐指数 <span class="math inline">\(r_i\)</span>，但是呢，如果某个职员的直接上司来参加舞会了，那么这个职员就无论如何也不肯来参加舞会了。</p>
<p>所以，请你编程计算，邀请哪些职员可以使快乐指数最大，求最大的快乐指数。</p>
<h1 id="sol">Sol</h1>
<p>正确做法:</p>
<p>给每个节点安排<code>f[i][0]</code>和<code>f[i][1]</code>.分别表示选择该节点和不选择该节点的 dp 值.</p>
<p><span class="math inline">\(f[u][0]=r[u]+\sum_{edge(u,v)}f[v][1],f[u][1]=\sum _{edge(u,v)}max(f[v][1],f[v][0])\)</span>.</p>
<p>初始调用<code>dp(root,0)</code>和<code>dp(root,1)</code>.当<span class="math inline">\(u\)</span>为叶子节点时抵达边界,不需要特判.</p>
<p>最后答案取<span class="math inline">\(max(f[root][0],f[root][1])\)</span>.</p>
<p>我的错误做法:</p>
<p><del>给每个节点安排<code>f[i][0]</code>和<code>f[i][1]</code>.分别表示选择该节点和不选择该节点的 dp 值.</del></p>
<p><del>递归 dp 中传递 2 个值,一个是当前节点编号 u ,一个是父亲有没有选择(true 表示选择,false 表示不选择).</del></p>
<p><del>若父亲选择了,<span class="math inline">\(f[u][1]=\sum _{edge(u,v)}max(f[v][1],f[v][0])\)</span>.</del></p>
<p><del>若父亲未选择,<span class="math inline">\(f[u][0]=r[u]+\sum_{edge(u,v)}f[v][1],f[u][1]=\sum _{edge(u,v)}max(f[v][1],f[v][0])\)</span>.</del></p>
<p><del>初始调用<code>dp(root,0)</code>和<code>dp(root,1)</code>.当<span class="math inline">\(u\)</span>为叶子节点时抵达边界,不需要特判.</del></p>
<p><del>最后答案取<span class="math inline">\(max(f[root][0],f[root][1])\)</span>.</del></p>
<p>错误就错误在虽然树形 DP 中父节点的状态可能影响子节点.但应该在合并答案时判断这个状态带来的影响,而不是在递归计算子节点时.</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E6%A0%91%E5%BD%A2%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">树形动态规划, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷 </a></div><a class="article-more button is-small is-size-7" href="/2021/03/20/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1352-%E6%B2%A1%E6%9C%89%E4%B8%8A%E5%8F%B8%E7%9A%84%E8%88%9E%E4%BC%9A/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/19/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P3225-%5BHNOI2012%5D%E7%9F%BF%E5%9C%BA%E6%90%AD