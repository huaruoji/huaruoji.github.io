<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>分类: 图论 - 滑蒻稽的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="滑蒻稽的博客"><meta name="msapplication-TileImage" content="/img/positive.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="滑蒻稽的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="滑蒻稽的博客"><meta property="og:url" content="https://huaruoji.github.io/"><meta property="og:site_name" content="滑蒻稽的博客"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://huaruoji.github.io/img/og_image.png"><meta property="article:author" content="huaruoji"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://huaruoji.github.io"},"headline":"滑蒻稽的博客","image":["https://huaruoji.github.io/img/og_image.png"],"author":{"@type":"Person","name":"huaruoji"},"description":""}</script><link rel="icon" href="/img/positive.svg"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="滑蒻稽的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives/">归档</a><a class="navbar-item" href="/categories/">分类</a><a class="navbar-item" href="/tags/">标签</a><a class="navbar-item" href="/about/">关于我</a><a class="navbar-item" href="/%E6%AF%8F%E6%97%A5/">每日</a><a class="navbar-item" href="/%E5%8F%8B%E9%93%BE/">友链</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Huaruoji GitHub" href="https://www.github.com/huaruoji"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">图论</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/04/01/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P2515%20%5BHAOI2010%5D%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/"><i class="fas fa-angle-double-right"></i>【题解】P2515 [HAOI2010]软件安装</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-04-01</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-04-01</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E8%BF%9E%E9%80%9A%E6%80%A7%E9%97%AE%E9%A2%98/">连通性问题</a></span><span class="level-item"><i class="far fa-clock"></i> 7 分钟读完 (大约988个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>现在我们的手头有<span class="math inline">\(N\)</span>个软件，对于一个软件i，它要占用<span class="math inline">\(W_i\)</span>的磁盘空间，它的价值为<span class="math inline">\(V_i\)</span>。我们希望从中选择一些软件安装到一台磁盘容量为<span class="math inline">\(M\)</span>计算机上，使得这些软件的价值尽可能大（即<span class="math inline">\(V_i\)</span>的和最大）。</p>
<p>但是现在有个问题：软件之间存在依赖关系，即软件i只有在安装了软件<span class="math inline">\(j\)</span>（包括软件j的直接或间接依赖）的情况下才能正确工作（软件<span class="math inline">\(i\)</span>依赖软件<span class="math inline">\(j\)</span>)。幸运的是，一个软件最多依赖另外一个软件。如果一个软件不能正常工作，那么它能够发挥的作用为<span class="math inline">\(0\)</span>。</p>
<p>我们现在知道了软件之间的依赖关系：软件i依赖软件<span class="math inline">\(D_i\)</span>。现在请你设计出一种方案，安装价值尽量大的软件。一个软件只能被安装一次，如果一个软件没有依赖则<span class="math inline">\(D_i=0\)</span>，这时只要这个软件安装了，它就能正常工作。</p>
<h1 id="sol">Sol</h1>
<p>来，，，先复习一下什么是有向图的强联通分量。有向图的强联通分量是指有向图的极大强联通子图。强联通图指的是图中任意 2 个点 <span class="math inline">\(x,y\)</span> 存在 <span class="math inline">\(x\)</span> 到 <span class="math inline">\(y\)</span> 的路径,也存在 <span class="math inline">\(y\)</span> 到 <span class="math inline">\(x\)</span> 的路径。</p>
<p>那么本题中处于同一个强联通分量的点都是<strong>互相依赖</strong>的，也就是要么都装，要么都不装。运用 Tarjan 算法缩点后建立新图，注意每棵树都要连接到虚拟节点 0 上。</p>
<p>然后从节点 0 开始进行树上背包，就可以求出答案了。</p>
<p>树上背包时间复杂度 <span class="math inline">\(O(M^2N)\)</span>，缩点时间复杂度 <span class="math inline">\(O(N+M)\)</span>。</p>
<p>另外，由于这是有依赖的背包问题，在枚举当前节点的容量 <span class="math inline">\(v\)</span> 时，下界是 <span class="math inline">\(w_u\)</span>。</p>
<p>为什么呢？设当前枚举容量为 <span class="math inline">\(j\)</span> 。</p>
<p>若当前枚举的是第一个孩子：</p>
<ol type="1">
<li><span class="math inline">\(j=w_u\)</span>，正常更新。</li>
<li><span class="math inline">\(j&gt;w_u\)</span> ，那么 <span class="math inline">\(f(u,j)=0\)</span>，就算加上 <span class="math inline">\(f(v,x)\)</span>，也没有第一种情况大。</li>
</ol>
<p>若当前枚举的是其他孩子，无论 <span class="math inline">\(j\)</span> 为多少，<span class="math inline">\(f(u,j)\)</span> 一定是由上面第一种情况更新的。值为 <span class="math inline">\(w_u+f(v,x)\)</span> ，可以用到现在的状况正常更新！</p>
<p>其实<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P2014">P2014 [CTSC1997]选课</a>也是有依赖的背包问题，但下界是 1，就没怎么注意。导致这次做根本没考虑这件事。</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E5%9B%BE%E8%AE%BA/">图论, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷, </a><a class="link-muted" rel="tag" href="/tags/%E5%BC%BA%E8%81%94%E9%80%9A%E5%88%86%E9%87%8F/">强联通分量 </a></div><a class="article-more button is-small is-size-7" href="/2021/04/01/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P2515%20%5BHAOI2010%5D%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/04/01/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1640-%5BSCOI2010%5D%E8%BF%9E%E7%BB%AD%E6%94%BB%E5%87%BB%E6%B8%B8%E6%88%8F/"><i class="fas fa-angle-double-right"></i>【题解】P1640 [SCOI2010]连续攻击游戏</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-04-01</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-04-01</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a><span> / </span><a class="link-muted" href="/categories/%E9%A2%98%E8%A7%A3/SCOI/">SCOI</a></span><span class="level-item"><i class="far fa-clock"></i> 2 分钟读完 (大约356个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>lxhgww最近迷上了一款游戏，在游戏里，他拥有很多的装备，每种装备都有2个属性，这些属性的值用[1,10000]之间的数表示。当他使用某种装备时，他只能使用该装备的某一个属性。并且每种装备最多只能使用一次。游戏进行到最后，lxhgww遇到了终极boss，这个终极boss很奇怪，攻击他的装备所使用的属性值必须从1开始连续递增地攻击，才能对boss产生伤害。也就是说一开始的时候，lxhgww只能使用某个属性值为1的装备攻击boss，然后只能使用某个属性值为2的装备攻击boss，然后只能使用某个属性值为3的装备攻击boss……以此类推。现在lxhgww想知道他最多能连续攻击boss多少次？</p>
<h1 id="sol">Sol</h1>
<p>每个装备只能用一次，但是有 2 个属性值，很明显的“点只选一个”的二分图匹配的特征。必须满足的是属性值连续。说明可以把属性值当作左部，装备 id 当作右部进行二分图匹配。只要有一次匹配不到就结束。</p>
<h1 id="my-code">My code</h1>
<p>之前做是用贪心乱搞的，代码就懒得写了。</p>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷, </a><a class="link-muted" rel="tag" href="/tags/%E8%B4%AA%E5%BF%83/">贪心 </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/04/01/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1129-%5BZJOI2007%5D-%E7%9F%A9%E9%98%B5%E6%B8%B8%E6%88%8F/"><i class="fas fa-angle-double-right"></i>【题解】P1129 [ZJOI2007] 矩阵游戏</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-04-01</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-04-01</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图</a></span><span class="level-item"><i class="far fa-clock"></i> 5 分钟读完 (大约814个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>小 Q 是一个非常聪明的孩子，除了国际象棋，他还很喜欢玩一个电脑益智游戏――矩阵游戏。矩阵游戏在一个 <span class="math inline">\(n \times n\)</span> 黑白方阵进行（如同国际象棋一般，只是颜色是随意的）。每次可以对该矩阵进行两种操作：</p>
<ul>
<li>行交换操作：选择矩阵的任意两行，交换这两行（即交换对应格子的颜色）。</li>
<li>列交换操作：选择矩阵的任意两列，交换这两列（即交换对应格子的颜色）。</li>
</ul>
<p>游戏的目标，即通过若干次操作，使得方阵的主对角线(左上角到右下角的连线)上的格子均为黑色。</p>
<p>对于某些关卡，小 Q 百思不得其解，以致他开始怀疑这些关卡是不是根本就是无解的！于是小 Q 决定写一个程序来判断这些关卡是否有解。</p>
<h1 id="sol">Sol</h1>
<p>从这道题可以看出二分图的题的一点特征。这道题有很多种交换方式，但进行了一些交换操作后另一些就不能进行了。比如将第二行与某一行进行交换，再将第一列与某一列进行交换，刚好把一个黑色格子（2,1）移到主对角线上去了。 那么我们就不能再使用第二行和第一列上的任何其他格子了。因为要“使用”（即把它们交换到主对角线上去）它们，就必须进行与前面的交换操作不一样的交换操作。所以就算每一行可以与多列组合来交换一个格子，每一列与多行组合来交换一个格子。任何一行或一列都只能被“使用”一次。抽象一下，这不就是二分图匹配吗！</p>
<p>题目问能不能使主对角线布满黑色格子，其实就是问能不能找到 <span class="math inline">\(n\)</span> 对匹配。</p>
<p>总结一下：这道题想要我们达到的操作可以看作是许多约束关系的实现（要想让主对角线上一个格子有黑色，就必须交换一行加一列。当然，如果本来就是黑色，相当于不交换），但约束关系的端点只能被选择一次。抽象出二分图匹配的模型就不难了。</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷, </a><a class="link-muted" rel="tag" href="/tags/%E6%80%9D%E8%B7%AF%E5%B7%A7%E5%A6%99-%E6%8C%87%E8%A2%AB%E6%BB%91%E8%92%BB%E7%A8%BD%E5%88%87%E4%BA%86/">思路巧妙(指被滑蒻稽切了) </a></div><a class="article-more button is-small is-size-7" href="/2021/04/01/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1129-%5BZJOI2007%5D-%E7%9F%A9%E9%98%B5%E6%B8%B8%E6%88%8F/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/31/%E3%80%90%E4%B8%93%E9%A2%98%E3%80%91%E4%BA%8C%E5%88%86%E5%9B%BE/"><i class="fas fa-angle-double-right"></i>【专题】二分图</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-31</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-04-01</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图</a></span><span class="level-item"><i class="far fa-clock"></i> 4 分钟读完 (大约669个字)</span></div></div><div class="content"><h1 id="二分图的判定">二分图的判定</h1>
<p><strong>定理：</strong>一张图是二分图，当且仅当图中不存在奇环（长度为奇数的环）。</p>
<p>利用 DFS 进行染色。如果环的长度为偶数，不会出现颜色相同的冲突，反之则会。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> col)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len=g[u].size();</span><br><span class="line">    color[u]=col;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++) &#123;</span><br><span class="line">        <span class="keyword">int</span>&amp; v=g[u][i];</span><br><span class="line">        <span class="keyword">if</span>(color[v]==color[u]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(color[v]==<span class="number">0</span> &amp;&amp; dfs(v,-col)==<span class="literal">false</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//color[i]为-1,0或1  -1,1表示颜色  0表示是否访问 </span></span><br></pre></td></tr></table></figure>
<h1 id="二分图最大匹配">二分图最大匹配</h1>
<h2 id="匈牙利算法">匈牙利算法</h2>
<p><strong>二分图的增广路：</strong>增广路是二分图中的一条路径。增广路的起点和终点都是未匹配点。增广路由已选择路径和未选择路径交替组成，也就是说，增广路含有的原本两部之间路径数量为奇数。</p>
<p>将增广路中的所有已选择路径改为未选择路径，未选择路径改为已选择路径，匹配数量就增加了 1 。</p>
<p>匈牙利算法（Hungarian Algorithm）不断寻找增广路，直到找到二分图的最大匹配。</p>
<p><strong>特性：</strong>当一个节点成为匹配节点，就不会再变成未匹配节点。（可以用来输出匹配方案）</p>
<p>时间复杂度：<span class="math inline">\(O(NM)\)</span></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len=g[u].size();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++) &#123;</span><br><span class="line">        <span class="keyword">int</span> &amp;v=g[u][i];</span><br><span class="line">        <span class="keyword">if</span>(!vis[v]) &#123;</span><br><span class="line">            vis[v]=<span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span>(!mat[v] || dfs(mat[v])) &#123;mat[v]=u;<span class="keyword">return</span> <span class="literal">true</span>;&#125; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中，vis 数组的作用仅仅是避免单次寻找增广路时的重复搜索，所以每次执行 dfs 前都要清零。</p>
<h1 id="二分图带权最大匹配">二分图带权最大匹配</h1>
<p>等我学了网络流再说</p>
<h1 id="二分图最大独立集">二分图最大独立集</h1>
<p>选最多的点，满足两两之间没有边相连。</p>
<p>二分图中，最大独立集 = <span class="math inline">\(n\)</span> - 最大匹配。</p>
<h1 id="二分图最小点覆盖">二分图最小点覆盖</h1>
<p>对于一个二分图，求出一个最小的点集 <span class="math inline">\(S\)</span>，使得图中任意一条边都至少有一个端点属于 <span class="math inline">\(S\)</span>。<span class="math inline">\(S\)</span> 就是这个二分图的最小点覆盖。</p>
<p><strong>König定理</strong>：二分图最小点覆盖包含的点数等于二分图最大匹配包含的边数。</p>
<p><strong>构造点覆盖的方法：</strong></p>
<ol type="1">
<li>求出二分图最大匹配</li>
<li>从左部每个匹配点出发，再执行一次 DFS 寻找增广路的过程，标记访问过的节点。</li>
<li>取左部未被标记的点，右部被标记了点，就得到了二分图的最小点覆盖。</li>
</ol>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E5%9B%BE%E8%AE%BA/">图论, </a><a class="link-muted" rel="tag" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图 </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/31/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1525-%5BNOIP2010-%E6%8F%90%E9%AB%98%E7%BB%84%5D-%E5%85%B3%E6%8A%BC%E7%BD%AA%E7%8A%AF/"><i class="fas fa-angle-double-right"></i>【题解】P1525 [NOIP2010 提高组] 关押罪犯</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-31</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-31</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E5%BD%A2%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">树形数据结构</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图</a><span> / </span><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E5%BD%A2%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B6%E6%9F%A5%E9%9B%86/">并查集</a></span><span class="level-item"><i class="far fa-clock"></i> 5 分钟读完 (大约820个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>S 城现有两座监狱，一共关押着 <span class="math inline">\(N\)</span> 名罪犯，编号分别为 <span class="math inline">\(1-N\)</span>。他们之间的关系自然也极不和谐。很多罪犯之间甚至积怨已久，如果客观条件具备则随时可能爆发冲突。我们用“怨气值”（一个正整数值）来表示某两名罪犯之间的仇恨程度，怨气值越大，则这两名罪犯之间的积怨越多。如果两名怨气值为 <span class="math inline">\(c\)</span> 的罪犯被关押在同一监狱，他们俩之间会发生摩擦，并造成影响力为 <span class="math inline">\(c\)</span> 的冲突事件。</p>
<p>每年年末，警察局会将本年内监狱中的所有冲突事件按影响力从大到小排成一个列表，然后上报到 S 城 Z 市长那里。公务繁忙的 Z 市长只会去看列表中的第一个事件的影响力，如果影响很坏，他就会考虑撤换警察局长。</p>
<p>在详细考察了<span class="math inline">\(N\)</span> 名罪犯间的矛盾关系后，警察局长觉得压力巨大。他准备将罪犯们在两座监狱内重新分配，以求产生的冲突事件影响力都较小，从而保住自己的乌纱帽。假设只要处于同一监狱内的某两个罪犯间有仇恨，那么他们一定会在每年的某个时候发生摩擦。</p>
<p>那么，应如何分配罪犯，才能使 Z 市长看到的那个冲突事件的影响力最小？这个最小值是多少？</p>
<h1 id="sol">Sol</h1>
<p>一个奇怪的特征：局长只会看冲突最大的事件。</p>
<p>换言之，满足条件的答案大小具有单调性，且首先要满足冲突最大的犯人。</p>
<p>2种做法就出来了，一是贪心+并查集，二是二分答案+二分图匹配。</p>
<p>之前一直没理解透二分答案，其实就是：答案就在那里，我要去找到它。</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/">二分图, </a><a class="link-muted" rel="tag" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/">并查集, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷, </a><a class="link-muted" rel="tag" href="/tags/%E8%B4%AA%E5%BF%83/">贪心 </a></div><a class="article-more button is-small is-size-7" href="/2021/03/31/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1525-%5BNOIP2010-%E6%8F%90%E9%AB%98%E7%BB%84%5D-%E5%85%B3%E6%8A%BC%E7%BD%AA%E7%8A%AF/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/26/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P4281-%5BAHOI2008%5D%E7%B4%A7%E6%80%A5%E9%9B%86%E5%90%88/"><i class="fas fa-angle-double-right"></i>【题解】P4281 [AHOI2008]紧急集合</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-26</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-26</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E6%A0%91%E8%AE%BA/">树论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E6%A0%91%E8%AE%BA/LCA/">LCA</a></span><span class="level-item"><i class="far fa-clock"></i> 5 分钟读完 (大约794个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>欢乐岛上有个非常好玩的游戏，叫做“紧急集合”。在岛上分散有 <span class="math inline">\(n\)</span> 个等待点，有 <span class="math inline">\(n-1\)</span> 条道路连接着它们，每一条道路都连接某两个等待点，且通过这些道路可以走遍所有的等待点，通过道路从一个点到另一个点要花费一个游戏币。</p>
<p>参加游戏的人三人一组，开始的时候，所有人员均任意分散在各个等待点上（每个点同时允许多个人等待），每个人均带有足够多的游戏币（用于支付使用道路的花费）、地图（标明等待点之间道路连接的情况）以及对话机（用于和同组的成员联系）。当集合号吹响后，每组成员之间迅速联系，了解到自己组所有成员所在的等待点后，迅速在 <span class="math inline">\(n\)</span> 个等待点中确定一个集结点，组内所有成员将在该集合点集合，集合所用花费最少的组将是游戏的赢家。</p>
<p>小可可和他的朋友邀请你一起参加这个游戏，由你来选择集合点，聪明的你能够完成这个任务，帮助小可可赢得游戏吗？</p>
<h1 id="sol">Sol</h1>
<p>3 人分别在<span class="math inline">\(x,y,z\)</span>点.假设<span class="math inline">\(LCA(x,y,z)=m\)</span>,那么,答案点<span class="math inline">\(u\)</span>必然在由<span class="math inline">\((x,m),(y,m),(z,m)\)</span>组成的点集<span class="math inline">\(V\)</span>上.当<span class="math inline">\((u,x),(u,y),(u,z)\)</span>互不相交时,就是最优答案.而这个<span class="math inline">\(u\)</span>必然是<span class="math inline">\(LCA(x,y),LCA(y,z),LCA(x,z)\)</span>.中的一个.</p>
<p>以上就是对做法的简单证明,做得时候当然不是这么想的<del>完全靠直觉</del></p>
<p>代码太丑,忍忍算了.</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/LCA/">LCA, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷 </a></div><a class="article-more button is-small is-size-7" href="/2021/03/26/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P4281-%5BAHOI2008%5D%E7%B4%A7%E6%80%A5%E9%9B%86%E5%90%88/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/23/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1262-%E9%97%B4%E8%B0%8D%E7%BD%91%E7%BB%9C/"><i class="fas fa-angle-double-right"></i>【题解】P1262 间谍网络</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-23</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-23</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E8%BF%9E%E9%80%9A%E6%80%A7%E9%97%AE%E9%A2%98/">连通性问题</a></span><span class="level-item"><i class="far fa-clock"></i> 5 分钟读完 (大约769个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p>由于外国间谍的大量渗入，国家安全正处于高度的危机之中。如果A间谍手中掌握着关于B间谍的犯罪证据，则称A可以揭发B。有些间谍收受贿赂，只要给他们一定数量的美元，他们就愿意交出手中掌握的全部情报。所以，如果我们能够收买一些间谍的话，我们就可能控制间谍网中的每一分子。因为一旦我们逮捕了一个间谍，他手中掌握的情报都将归我们所有，这样就有可能逮捕新的间谍，掌握新的情报。</p>
<p>我们的反间谍机关提供了一份资料，包括所有已知的受贿的间谍，以及他们愿意收受的具体数额。同时我们还知道哪些间谍手中具体掌握了哪些间谍的资料。假设总共有n个间谍(n不超过3000)，每个间谍分别用1到3000的整数来标识。</p>
<p>请根据这份资料，判断我们是否有可能控制全部的间谍，如果可以，求出我们所需要支付的最少资金。否则，输出不能被控制的一个间谍。</p>
<h1 id="sol">Sol</h1>
<p>考虑一个 DAG.入度为0的节点必须要能被贿赂且必须贿赂.答案就是入度为0的节点的贿金和.如果有一个不能贿,就输出 NO.其实就是<a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P2746">P2746 [USACO5.3]校园网Network of Schools</a>的Subtask 1.</p>
<p>整个图本不是 DAG,使用缩点即可.对强联通分量的贿金比较复杂,注意一下即可.</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E5%9B%BE%E8%AE%BA/">图论, </a><a class="link-muted" rel="tag" href="/tags/tarjan/">tarjan, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷, </a><a class="link-muted" rel="tag" href="/tags/%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/">强连通分量 </a></div><a class="article-more button is-small is-size-7" href="/2021/03/23/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1262-%E9%97%B4%E8%B0%8D%E7%BD%91%E7%BB%9C/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/20/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1119-%E7%81%BE%E5%90%8E%E9%87%8D%E5%BB%BA/"><i class="fas fa-angle-double-right"></i>【题解】P1119 灾后重建</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-20</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-20</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E6%9C%80%E7%9F%AD%E8%B7%AF%E9%97%AE%E9%A2%98/">最短路问题</a></span><span class="level-item"><i class="far fa-clock"></i> 4 分钟读完 (大约654个字)</span></div></div><div class="content"><h1 id="des">Des</h1>
<p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P1119">P1119 灾后重建 - 洛谷 | 计算机科学教育新生态 (luogu.com.cn)</a></p>
<p>给出<span class="math inline">\(B\)</span>地区的村庄数<span class="math inline">\(N\)</span>，村庄编号从<span class="math inline">\(0\)</span>到<span class="math inline">\(N-1\)</span>，和所有<span class="math inline">\(M\)</span>条公路的长度，公路是双向的。并给出第<span class="math inline">\(i\)</span>个村庄重建完成的时间<span class="math inline">\(t_i\)</span>，你可以认为是同时开始重建并在第<span class="math inline">\(t_i\)</span>天重建完成，并且在当天即可通车。若<span class="math inline">\(t_i\)</span>为<span class="math inline">\(0\)</span>则说明地震未对此地区造成损坏，一开始就可以通车。之后有<span class="math inline">\(Q\)</span>个询问<span class="math inline">\((x, y, t)\)</span>，对于每个询问你要回答在第<span class="math inline">\(t\)</span>天，从村庄<span class="math inline">\(x\)</span>到村庄y的最短路径长度为多少。如果无法找到从<span class="math inline">\(x\)</span>村庄到<span class="math inline">\(y\)</span>村庄的路径，经过若干个已重建完成的村庄，或者村庄<span class="math inline">\(x\)</span>或村庄<span class="math inline">\(y\)</span>在第t天仍未重建完成 ，则需要返回<span class="math inline">\(-1\)</span>。</p>
<h1 id="sol">Sol</h1>
<p>坑的一笔.</p>
<p>村庄的编号和完成时间都莫名其妙的从0开始,做了才知道出题人这样干别有用心.</p>
<p>村庄的完成时间和询问时间都是顺序排列的,其实给了一点暗示.如果再看数据范围以及询问的是最短路,不难想出用 Floyd .Floyd 本质是 DP 思想,DP 数组<code>d[k][i][j]</code>代表的其实是可以经过前 k 个村庄,从 i 到 j 的最短路.那么,本题的思路就很显然了. 枚举时间 t ,如果当前时间有村庄修好,运行 Floyd 的后两层循环, k 就是村庄的编号.如果当前时间有询问,直接输出即可. 这种枚举时间,人,国籍编号的思想其实十分常见.</p>
<p>再说说本题为什么坑. 在算法实现中,<del>你大概会</del>在内层循环使用<code>while</code>循环来枚举当前时间修好的村庄或询问. 外层循环时间从0开始,给出数据也从0开始,数组原值还是0.含义混淆了,容易枚举超界,需要注意边界控制.</p></div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/">最短路, </a><a class="link-muted" rel="tag" href="/tags/%E9%A2%98%E8%A7%A3/">题解, </a><a class="link-muted" rel="tag" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷, </a><a class="link-muted" rel="tag" href="/tags/Floyd/">Floyd </a></div><a class="article-more button is-small is-size-7" href="/2021/03/20/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P1119-%E7%81%BE%E5%90%8E%E9%87%8D%E5%BB%BA/#more"><i class="fas fa-book-reader has-text-grey"></i>  阅读更多</a></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/19/%E3%80%90%E5%9B%BE%E8%AE%BA%E3%80%91%E6%9C%80%E7%9F%AD%E8%B7%AF%E9%97%AE%E9%A2%98/"><i class="fas fa-angle-double-right"></i>【图论】最短路问题</a></h1><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="${date_xml(page.date)}" title="${date_xml(page.date)}">2021-03-19</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="${date_xml(page.updated)}" title="${date_xml(page.updated)}">2021-03-20</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/">图论</a><span> / </span><a class="link-muted" href="/categories/%E5%9B%BE%E8%AE%BA/%E6%9C%80%E7%9F%AD%E8%B7%AF%E9%97%AE%E9%A2%98/">最短路问题</a></span><span class="level-item"><i class="far fa-clock"></i> 2 分钟读完 (大约369个字)</span></div></div><div class="content"><h1 id="floyd">Floyd</h1>
<h2 id="代码">代码</h2>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">            dis[i][j]=min(dis[i][j],dis[i][k]+dis[k][j]);</span><br></pre></td></tr></table></figure>
<h2 id="应用">应用</h2>
<h3 id="求传递闭包">求传递闭包</h3>
<figure>
<img src="https://gitee.com/huaruoji/images/raw/master/img/20210319200801.jpeg" alt="传递闭包"><figcaption aria-hidden="true">传递闭包</figcaption>
</figure>
<p>将<code>f[i][j]=f[i][k]+f[k][j]</code> 更改为 <code>f[i][j]=f[i][k]|f[k][j]</code>.</p>
<h3 id="求无向图的最小环">求无向图的最小环</h3>
<p>最小环为权值和最小的环.</p>
<p>考虑 Floyd 的性质.在还未更新<code>f[i][j]</code>时,<code>f[i][j]</code>代表的是从<code>i</code>到<code>j</code>不经过<code>k</code>的最短路. 联系环的特征.设一个环中编号最大节点为 k ,那么环的最短长度<code>w=g[i][k]+g[k][j]+f[i][j]</code>.</p>
<p>例题:</p>
<p><a target="_blank" rel="noopener" href="https://www.luogu.com.cn/problem/P6175">P6175 无向图的最小环问题</a></p>
<p>My code:</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> int long long</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> min(a,b) ((a)&lt;(b)?(a):(b))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">105</span>,INF=<span class="number">1e12</span>;</span><br><span class="line"><span class="keyword">int</span> n,m,ans=INF;</span><br><span class="line"><span class="keyword">int</span> g[N][N],d[N][N];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++) </span><br><span class="line">            <span class="keyword">if</span>(i!=j) g[i][j]=d[i][j]=INF;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u,v,w;</span><br><span class="line">        <span class="built_in">cin</span>&gt;&gt;u&gt;&gt;v&gt;&gt;w;</span><br><span class="line">        g[u][v]=min(g[u][v],w),g[v][u]=min(g[v][u],w);</span><br><span class="line">        d[u][v]=min(d[u][v],w),d[v][u]=min(d[v][u],w);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;k;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;k;j++)</span><br><span class="line">                ans=min(ans,g[i][k]+g[k][j]+d[i][j]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)</span><br><span class="line">                d[i][j]=min(d[i][j],d[i][k]+d[k][j]),d[j][i]=d[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(ans==INF) <span class="built_in">printf</span>(<span class="string">&quot;No solution.&quot;</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted" rel="tag" href="/tags/%E5%9B%BE%E8%AE%BA/">图论, </a><a class="link-muted" rel="tag" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF/">最短路 </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"><a class="has-link-black-ter" href="/2021/03/19/%E3%80%90%E9%A2%98%E8%A7%A3%E3%80%91P3225-%5BHNOI2012%5D%E7%9F%BF%E5%9C%BA%E6%90%AD%E5%BB%BA/"><i class="fas fa-angle-double-right">